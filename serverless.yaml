org: abandon
app: nestfibot
service: "nestfibot"
frameworkVersion: "3"
useDotenv: true
package:
  patterns:
    - "app.js"
    - "locales/**"
  individually: true
  excludeDevDependencies: true
provider:
  name: "aws"
  deploymentMethod: "direct"
  runtime: "nodejs16.x"
  region: "ap-northeast-1"
plugins:
  - "serverless-plugin-typescript"
  - "serverless-dotenv-plugin"
functions:
  app:
    name: NESTFiBot-${sls:stage}
    handler: "app.handler"
    timeout: 14
    memorySize: 256
    environment:
      BOT_TOKEN: ${env:BOT_TOKEN}
      UPSTASH_REDIS_REST_URL: ${env:UPSTASH_REDIS_REST_URL}
      UPSTASH_REDIS_REST_TOKEN: ${env:UPSTASH_REDIS_REST_TOKEN}
      CHAIN_ID: ${env:CHAIN_ID}
      HOSTNAME: ${env:HOSTNAME}
      CONNECT_URL: ${env:CONNECT_URL}
    events:
      - httpApi:
          path: "/bot"
          method: "post"
